<?xml version="1.0" encoding="UTF-8" ?>

<Configuration xmlns="urn:com.io7m.idstore:configuration:1">

  <Branding ProductTitle="idstore"/>

  <Database Kind="POSTGRESQL"
            Name="postgres"
            OwnerRoleName="postgres"
            OwnerRolePassword="12345678"
            ReaderRolePassword="abcdefgh"
            WorkerRolePassword="1234abcd"
            Address="localhost"
            Port="54322"
            Create="false"
            Upgrade="false"/>

  <HTTPServices>
    <HTTPServiceAdminAPI ListenAddress="localhost"
                         ListenPort="51000"
                         ExternalURI="http://localhost:51000/"/>
    <HTTPServiceUserAPI ListenAddress="localhost"
                        ListenPort="50000"
                        ExternalURI="http://localhost:50000/"/>
    <HTTPServiceUserView ListenAddress="localhost"
                         ListenPort="50001"
                         ExternalURI="http://localhost:50001/"/>
  </HTTPServices>

  <History UserLoginHistoryLimit="100"
           AdminLoginHistoryLimit="10000"/>

  <Mail SenderAddress="no-reply@example.com"
        VerificationExpiration="PT24H">
    <SMTPTLS Host="mail.example.com"
          Port="25"/>
    <MailAuthentication Username="example"
                        Password="12345678"/>
  </Mail>

  <OpenTelemetry LogicalServiceName="idstore">
    <Logs Endpoint="http://logs.example.com:4317"
          Protocol="GRPC"/>
    <Metrics Endpoint="http://metrics.example.com:4317"
            Protocol="GRPC"/>
    <Traces Endpoint="http://traces.example.com:4317"
            Protocol="GRPC"/>
  </OpenTelemetry>

  <PasswordExpiration AdminPasswordValidityDuration="PT30M"
                      UserPasswordValidityDuration="PT30M"/>

  <RateLimiting EmailVerificationRateLimit="PT10M"
                PasswordResetRateLimit="PT10M"/>

  <Sessions UserSessionExpiration="PT30M"
            AdminSessionExpiration="PT30M"/>

</Configuration>